import { startserver } from "./websocketsServer.js";
import WebSocket from "ws"

const wss = startserver()


function wait(){
    return new Promise((resolve) => setTimeout(resolve,20));
}
const client = new WebSocket("ws://localhost:8080/lobby")



while (client._readyState != 1){
    await wait()
}

client.send("hio")
var recievedData
client.onmessage = (event) => {
    console.log(event.data) 
    recievedData = event.data



    client.close()
    wss.close()
    
}



while (client._readyState != 3){
    await wait()
}



test('first test', () => {
    expect(recievedData).toBe('s');
  });






